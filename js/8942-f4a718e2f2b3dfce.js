"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8942],{28942:function(e,n,o){o.d(n,{default:function(){return M}});var t=o(57437),a=o(74667),i=o(3124),s=o(2265),r=o(56401),f=o(75539);async function l(e,n){let o=await fetch("".concat("https://toourguest.com","/api/editor/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok)throw Error("API call failed");return await o.json()}var c=o(73259),u=o(7620),m=o(49891),d=o(11422),p=o(84833),y=o(61473),w=o(1191),I=o(51522),h=o(2308),g=o(67112),b=o(21451),k=o(14337),v=o(3077),x=o(32558),E=o(52196),F=o(85919),P=o(38872),j=o(81174),N=o(42343);let C=(0,o(59625).Ue)(e=>({isInitializing:!0,setIsInitializing:n=>e({isInitializing:n})}));var T=o(80068),B=o(49923),L=o(97739),z=o(11797),O=o(61994),S=o(33957),Z=o(36498),q=o(23897),G=o(27955),V=o(27648);function _(){return(0,t.jsx)("div",{className:"sticky bottom-0 z-50 flex opacity-75 w-full ",children:(0,t.jsx)("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-full",children:(0,t.jsx)(G.E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:1},className:"px-4 py-2 bg-tog-666 rounded-t-lg opacity-25 text-center w-full",children:(0,t.jsxs)("div",{className:"w-full space-y-3 p-4",children:[(0,t.jsx)("p",{className:"text-lg text-white w-full",children:"구매 후 워터마크를 제거해 주세요"}),(0,t.jsxs)("div",{className:"text-sm text-white leading-6 py-1",children:["워터마크를 제거하지 않은 초대장은",(0,t.jsx)("br",{}),"제작일로 부터 14일 이후 자동으로 삭제됩니다."]}),(0,t.jsxs)("div",{className:"flex pt-2 items-center gap-2",children:[(0,t.jsx)(V.default,{href:"https://smartstore.naver.com/toourguest",target:"_blank",className:"flex text-white w-full border border-white rounded-md h-12 justify-center items-center",children:"구매하기"}),(0,t.jsx)(V.default,{href:"https://my.toourguest.com/editor/preferences",target:"_blank",className:"flex text-black bg-tog-pink w-full rounded-md h-12 justify-center items-center",children:"워터마크 제거하기"})]})]})})})})}var U=o(49867),A=o(91308);function D(){let e=(0,r.l)(e=>e.cardInfo),n=(0,r.l)(e=>e.blockOrder),o=(0,m.i)(e=>e.bgmInfo),a=(0,r.l)(e=>e.themeInfo),i=(0,L.i)(e=>e.paymentInfo),f=(0,r.l)(e=>e.isZoomed),l=(0,r.l)(e=>e.setIsZoomed),c=(0,N.I)(e=>e.flowerBusinessInfo);return(0,q.V)(()=>{Z.ZP.to(document.body,{backgroundColor:a&&a.theme2})},[a]),(0,s.useEffect)(()=>{var n;let o=()=>{if((!e.isZoomAvailable||!e.isZoomAvailable)&&window.visualViewport){let{scale:e}=window.visualViewport;e>1&&!f?l(!0):l(!1)}};return null===(n=window.visualViewport)||void 0===n||n.addEventListener("resize",o),window.addEventListener("load",o),o(),()=>{var e;null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",o),window.removeEventListener("load",o)}},[e.isZoomAvailable]),(0,t.jsxs)("div",{className:(0,O.Z)({"flex flex-col justify-center h-full max-w-md lg:w-[400px] mx-auto md:rounded-3xl shadow-xl md:my-12 relative bg-white":!0,"font-pretendard":"pretendard"===e.fontFamily,"font-diphylleia":"diphylleia"===e.fontFamily,"font-gowundodum":"gowundodum"===e.fontFamily,"font-gowunbatang":"gowunbatang"===e.fontFamily,"font-nanumgothic":"nanumgothic"===e.fontFamily,"font-nanummyeongjo":"nanummyeongjo"===e.fontFamily,"font-notosanskr":"notosanskr"===e.fontFamily,"font-notoserifkr":"notoserifkr"===e.fontFamily,"font-changwondangamasac":"changwondangamasac"===e.fontFamily,"font-gabiaheuldot":"gabiaheuldot"===e.fontFamily,"font-gabiaMaeumgyeol":"gabiaMaeumgyeol"===e.fontFamily,"font-gabiaondam":"gabiaondam"===e.fontFamily,"font-ghanachocolate":"ghanachocolate"===e.fontFamily,"font-gmarketsans":"gmarketsans"===e.fontFamily,"font-kcceunyoung":"kcceunyoung"===e.fontFamily,"font-leferipointspecialitalic":"leferipointspecialitalic"===e.fontFamily,"font-leferipointwhiteoblique":"leferipointwhiteoblique"===e.fontFamily,"font-mapoflowerisland":"mapoflowerisland"===e.fontFamily,"font-mapogoldenpier":"mapogoldenpier"===e.fontFamily,"font-maruburi":"maruburi"===e.fontFamily,"font-nanumbarunpen":"nanumbarunpen"===e.fontFamily,"font-nanumsquareneo":"nanumsquareneo"===e.fontFamily,"font-nexonlv1":"nexonlv1"===e.fontFamily,"font-sokchobadabatang":"sokchobadabatang"===e.fontFamily,"font-eulyoo1945":"eulyoo1945"===e.fontFamily,"font-hakgyoansim":"hakgyoansim"===e.fontFamily,"font-suit":"suit"===e.fontFamily,"font-suite":"suite"===e.fontFamily}),style:{fontSize:e.fontSize},children:[o.isUsed?(0,t.jsx)(S.Z,{}):null,(0,u.J)({blockId:"cover"}).cardBlock,n.map(e=>{if(e.isUsed)return(0,u.J)({blockId:e.id}).cardBlock}),(0,u.J)({blockId:"share"}).cardBlock,i&&0===i.cardId?(0,t.jsx)(_,{}):null,c.isFloatingButton?(0,t.jsx)("div",{className:"sticky bottom-8 z-30 opacity-80",children:(0,t.jsx)(A.U,{})}):null,(0,t.jsx)(U.Z,{paymentInfo:i})]})}function M(e){let{type:n,props:o}=e;return(!function(e){let n=C(e=>e.setIsInitializing),o=(0,r.l)(e=>e.setCardInfo),t=(0,L.i)(e=>e.setPaymentInfo),f=(0,r.l)(e=>e.setBlockOrder),l=(0,d.y)(e=>e.setShareInfo),u=(0,m.i)(e=>e.setBgmInfo),z=(0,E.b)(e=>e.setCoverInfo),O=(0,c.T)(e=>e.setInvitationNote),S=(0,k.R)(e=>e.setGalleryInfo),Z=(0,B._)(e=>e.setGalleryBucketInfo),q=(0,p.M)(e=>e.setGuestbookInfo),G=(0,p.M)(e=>e.setGuestbookContent),V=(0,x.C)(e=>e.setCalendarInfo),_=(0,y.e)(e=>e.setVenueInfo),U=(0,a.n)(e=>e.setCoupleInfo),A=(0,w.v)(e=>e.setRsvpInfo),D=(0,i.I)(e=>e.setWeddingDay),M=(0,T.V)(e=>e.setBucketInfo),J=(0,I.e)(e=>e.setDirectionInfo),R=(0,I.e)(e=>e.setTransportation),K=(0,h.a)(e=>e.setContactInfo),X=(0,v.T)(e=>e.setNoticeInfo),H=(0,v.T)(e=>e.setNoticeContent),Q=(0,g.k)(e=>e.setHoneymoonFund),W=(0,b.X)(e=>e.setQuoteInfo),Y=(0,F.G)(e=>e.setVideoInfo),$=(0,P.u)(e=>e.setSpecialLinkOne),ee=(0,j.G)(e=>e.setSpecialLinkTwo),en=(0,N.I)(e=>e.setFlowerBusinessInfo);(0,s.useEffect)(()=>{(async()=>{let a=[];e.cardInfo&&a.push(new Promise(n=>{o(e.cardInfo),n()})),e.blockOrder&&a.push(new Promise(n=>{f(e.blockOrder),n()})),e.paymentInfo&&a.push(new Promise(n=>{t(e.paymentInfo),n()})),e.shareInfo&&a.push(new Promise(n=>{l(e.shareInfo),n()})),e.bgmInfo&&a.push(new Promise(n=>{u(e.bgmInfo),n()})),e.coverInfo&&a.push(new Promise(n=>{z(e.coverInfo),n()})),e.invitationNote&&a.push(new Promise(n=>{O(e.invitationNote),n()})),e.galleryInfo&&a.push(new Promise(n=>{S(e.galleryInfo),n()})),e.galleryBucketInfo&&a.push(new Promise(n=>{Z(e.galleryBucketInfo),n()})),e.guestbookInfo&&a.push(new Promise(n=>{q(e.guestbookInfo),n()})),e.guestbookContent&&a.push(new Promise(n=>{G(e.guestbookContent),n()})),e.calendarInfo&&a.push(new Promise(n=>{V(e.calendarInfo),n()})),e.venueInfo&&a.push(new Promise(n=>{_(e.venueInfo),n()})),e.coupleInfo&&a.push(new Promise(n=>{U(e.coupleInfo),n()})),e.rsvpInfo&&a.push(new Promise(n=>{A(e.rsvpInfo),n()})),e.weddingDay&&a.push(new Promise(n=>{D(e.weddingDay),n()})),e.bucketInfo&&a.push(new Promise(n=>{M(e.bucketInfo),n()})),e.directionInfo&&a.push(new Promise(n=>{J(e.directionInfo),n()})),e.contactInfo&&a.push(new Promise(n=>{K(e.contactInfo),n()})),e.transportation&&a.push(new Promise(n=>{R(e.transportation),n()})),e.noticeInfo&&a.push(new Promise(n=>{X(e.noticeInfo),n()})),e.noticeContent&&a.push(new Promise(n=>{H(e.noticeContent),n()})),e.honeymoonFund&&a.push(new Promise(n=>{Q(e.honeymoonFund),n()})),e.quoteInfo&&a.push(new Promise(n=>{W(e.quoteInfo),n()})),e.videoInfo&&a.push(new Promise(n=>{Y(e.videoInfo),n()})),e.specialLinkOne&&a.push(new Promise(n=>{$(e.specialLinkOne),n()})),e.specialLinkTwo&&a.push(new Promise(n=>{ee(e.specialLinkTwo),n()})),e.flowerBusiness&&a.push(new Promise(n=>{en(e.flowerBusiness),n()})),await Promise.all(a),n(!1)})()},[])}(o),"design"===n&&function(){let{makeCall:e,error:n}=function(){let e=(0,r.l)(e=>e.cardInfo),n=(0,f.uK)(e=>e.setIsLoaded),[o,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(null),[c,u]=(0,s.useState)([]);return(0,s.useEffect)(()=>()=>{a&&clearTimeout(a)},[]),{makeCall:async function(o,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;if(n(!1),t(null),0===c.map(e=>e===o).length){u([...c,o]);return}a&&clearTimeout(a),i(setTimeout(async()=>{try{let n={...s,cardId:e.cardId};return await l(o,n)}catch(e){e instanceof Error?t(e):t(Error("Unknown error occurred"))}finally{n(!0)}},r))},error:o}}(),o=(0,f.uK)(e=>e.setIsLoaded),t=C(e=>e.isInitializing),T=(0,r.l)(e=>e.cardInfo),B=(0,r.l)(e=>e.blockOrder),L=(0,m.i)(e=>e.bgmInfo),z=(0,E.b)(e=>e.coverInfo),O=(0,d.y)(e=>e.shareInfo),S=(0,c.T)(e=>e.invitationNote),Z=(0,p.M)(e=>e.guestbookInfo),q=(0,y.e)(e=>e.venueInfo),G=(0,a.n)(e=>e.coupleInfo),V=(0,w.v)(e=>e.rsvpInfo),_=(0,i.I)(e=>e.weddingDay),U=(0,x.C)(e=>e.calendarInfo),A=(0,I.e)(e=>e.directionInfo),D=(0,I.e)(e=>e.transportation),M=(0,h.a)(e=>e.contactInfo),J=(0,k.R)(e=>e.galleryInfo),R=(0,v.T)(e=>e.noticeInfo),K=(0,v.T)(e=>e.noticeContent),X=(0,g.k)(e=>e.honeymoonFund),H=(0,b.X)(e=>e.quoteInfo),Q=(0,F.G)(e=>e.videoInfo),W=(0,P.u)(e=>e.specialLinkOne),Y=(0,j.G)(e=>e.specialLinkTwo),$=(0,N.I)(e=>e.flowerBusinessInfo);(0,s.useEffect)(()=>{(async()=>{t||await e("card-info",{param:T})})()},[T]),(0,s.useEffect)(()=>{let n=async()=>{await e("block-order",{param:B}),o(!0)};B.length===u.e.length&&n()},[B]),(0,s.useEffect)(()=>{(async()=>{t||await e("cover-info",{param:z})})()},[z]),(0,s.useEffect)(()=>{(async()=>{t||await e("couple-info",{param:G})})()},[G]),(0,s.useEffect)(()=>{(async()=>{t||await e("wedding-day",{param:_})})()},[_]),(0,s.useEffect)(()=>{(async()=>{t||await e("calendar-info",{param:U})})()},[U]),(0,s.useEffect)(()=>{(async()=>{t||await e("invitation-note",{param:S})})()},[S]),(0,s.useEffect)(()=>{(async()=>{t||await e("bgm-info",{param:L})})()},[L]),(0,s.useEffect)(()=>{(async()=>{if(t)return;let n={...O,userId:T.userId};await e("share",{param:n})})()},[O]),(0,s.useEffect)(()=>{(async()=>{t||await e("guestbook-info",{param:Z})})()},[Z]),(0,s.useEffect)(()=>{(async()=>{t||await e("venue-info",{param:q})})()},[q]),(0,s.useEffect)(()=>{(async()=>{t||await e("rsvp-info",{param:V})})()},[V]),(0,s.useEffect)(()=>{(async()=>{t||await e("direction-info",{param:A})})()},[A]),(0,s.useEffect)(()=>{(async()=>{t||await e("transportation",{param:D})})()},[D]),(0,s.useEffect)(()=>{(async()=>{t||await e("contact-info",{param:M})})()},[M]),(0,s.useEffect)(()=>{(async()=>{t||await e("gallery-info",{param:J})})()},[J]),(0,s.useEffect)(()=>{(async()=>{t||await e("notice-info",{param:R})})()},[R]),(0,s.useEffect)(()=>{(async()=>{t||await e("notice-content",{param:K})})()},[K]),(0,s.useEffect)(()=>{(async()=>{t||await e("honeymoon-fund",{param:X})})()},[X]),(0,s.useEffect)(()=>{(async()=>{t||await e("quote-info",{param:H})})()},[H]),(0,s.useEffect)(()=>{(async()=>{t||await e("video-info",{param:Q})})()},[Q]),(0,s.useEffect)(()=>{(async()=>{t||await e("special-link-one",{param:W})})()},[W]),(0,s.useEffect)(()=>{(async()=>{t||await e("special-link-two",{param:Y})})()},[Y]),(0,s.useEffect)(()=>{(async()=>{t||await e("flower-business",{param:$})})()},[$])}(),"design"===n)?(0,t.jsx)(z.Z,{}):(0,t.jsx)(D,{})}},97739:function(e,n,o){o.d(n,{i:function(){return t}});let t=(0,o(59625).Ue)(e=>({paymentInfo:{cardId:0,orderId:"",type:"",name:"",expiredAt:""},setPaymentInfo:n=>e(e=>({...e,paymentInfo:n}))}))}}]);